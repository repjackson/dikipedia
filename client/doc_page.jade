template(name='doc_page')
    with current_doc
        .ui.stackable.padded.grid 
            .middle.aligned.row
                .four.wide.center.aligned.column 
                    if dev
                        a.ui.circular.icon.large.button(href="localhost:3000")
                            i.left.chevron.big.icon
                    else
                        a.ui.circular.icon.large.button(href="https://www.dikipedia.io")
                            i.left.chevron.big.icon
                .eight.wide.column 
                    .ui.center.aligned.big.header(class=emotion_color_class) !{title}
                .four.wide.column 
            .row
                .twelve.wide.column 
                    //- if watson.metadata.image 
                    //-     unless is_video
                    //-         a(href=watson.metadata.image target='_window')
                    //-             img.ui.centered.image.rounded.pointer.call_visual(src=watson.metadata.image)
                    .scrolling
                        if wiki_html
                            |!{wiki_html.content}
                        else
                            if tone
                                //- .scrolling
                                +tone
                            //- else
                    //- +session_edit_value_button key='view_tone' value=false label='plain'

                    if tags
                        //- .ui.styled.accordion
                        //- .active.title
                        .ui.header #{tags.length} tags
                        //- i.dropdown.icon
                        //- .active.content
                        each tags
                            .ui.circular.large.label
                                |#{this}
                    if watson
                        +watson_view
                        
                .four.wide.column 
                    .meta
                        if watson.metadata.image 
                            a(href=watson.metadata.image target='_window')
                                img.ui.centered.image.rounded.pointer.call_visual(src=watson.metadata.image)
                        
                        .ui.header #{publish_when}
                        if url
                            a.ui.small.center.aligned.grey.header(href=url target='_window')
                                |#{url}
                            .spacer
                        
                        a.ui.circular.button(href=url target='_window')
                            i.external.icon
                            |view link
                        //- span.ui.grey.text #{domain}
                        //- i.refresh.circular.link.icon.calc_post
                        if publish_when
                            .ui.circular.button
                                //- i.calendar.icon
                                //- |#{watson.metadata.publication_date}
                                |#{publish_when}
                        div
                    .ui.circular.button.call_wiki 
                        i.wikipedia.icon
                        |call wiki
                    .ui.circular.button.call_watson 
                        i.chess.icon
                        |tag url
                    //- .ui.circular.button.call_watson_image
                    //-     i.chess.icon
                    //-     |tag image
                    .ui.circular.button.pull_tone
                        i.download.icon
                        |download content
                    .ui.circular.button.print_me
                        |print me
                    

template(name='emotion_circle')
    .ui.circular.label(class=emotion_circle_class title=emotion)
        span {{ to_percent percent }}
            //- if label 
            //-     |#{label}
            //- else 
            //-     |#{emotion}
        
